(function(t){function e(e){for(var r,o,s=e[0],c=e[1],l=e[2],u=0,f=[];u<s.length;u++)o=s[u],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&f.push(a[o][0]),a[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);p&&p(e);while(f.length)f.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],r=!0,o=1;o<n.length;o++){var c=n[o];0!==a[c]&&(r=!1)}r&&(i.splice(e--,1),t=s(s.s=n[0]))}return t}var r={},a={app:0},i=[];function o(t){return s.p+"js/"+({}[t]||t)+"."+{"chunk-2d0c849e":"0b5c8ac7","chunk-2d0e5d9c":"b25754c3","chunk-2d22494f":"35fd6335"}[t]+".js"}function s(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(t){var e=[],n=a[t];if(0!==n)if(n)e.push(n[2]);else{var r=new Promise((function(e,r){n=a[t]=[e,r]}));e.push(n[2]=r);var i,c=document.createElement("script");c.charset="utf-8",c.timeout=120,s.nc&&c.setAttribute("nonce",s.nc),c.src=o(t);var l=new Error;i=function(e){c.onerror=c.onload=null,clearTimeout(u);var n=a[t];if(0!==n){if(n){var r=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+r+": "+i+")",l.name="ChunkLoadError",l.type=r,l.request=i,n[1](l)}a[t]=void 0}};var u=setTimeout((function(){i({type:"timeout",target:c})}),12e4);c.onerror=c.onload=i,document.head.appendChild(c)}return Promise.all(e)},s.m=t,s.c=r,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(n,r,function(e){return t[e]}.bind(null,r));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var p=l;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"2a89":function(t,e,n){"use strict";n("c02e")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=n("2f62"),i=n("c14f"),o=n("1da1"),s=(n("a15b"),n("e9c4"),n("b64b"),n("9b0f")),c=n.n(s),l=n("a32b"),u=n.n(l),p=new CSInterface,f=u.a.join(p.getSystemPath("userData"),"Adobe","CEP","Extensions","EZImport","config.json"),d=u.a.join(p.getSystemPath("extension"),"config.default.json");function m(){return h.apply(this,arguments)}function h(){return h=Object(o["a"])(Object(i["a"])().m((function t(){var e,n;return Object(i["a"])().w((function(t){while(1)switch(t.p=t.n){case 0:return t.p=0,t.n=1,c.a.promises.readFile(f,"utf-8");case 1:return e=t.v,t.a(2,JSON.parse(e));case 2:return t.p=2,t.v,t.n=3,c.a.promises.readFile(d,"utf-8");case 3:return n=t.v,t.a(2,JSON.parse(n))}}),t,null,[[0,2]])}))),h.apply(this,arguments)}function b(t){return g.apply(this,arguments)}function g(){return g=Object(o["a"])(Object(i["a"])().m((function t(e){var n;return Object(i["a"])().w((function(t){while(1)switch(t.p=t.n){case 0:return t.p=0,t.n=1,c.a.promises.mkdir(u.a.dirname(f),{recursive:!0});case 1:return t.n=2,c.a.promises.writeFile(f,JSON.stringify(e,null,2));case 2:t.n=4;break;case 3:t.p=3,n=t.v,console.error("Error saving config:",n);case 4:return t.a(2)}}),t,null,[[0,3]])}))),g.apply(this,arguments)}var v={namespaced:!0,state:function(){return{pathDirectory:null,libraryType:null,locale:"en"}},mutations:{setPathDirectory:function(t,e){t.pathDirectory=e},setLibraryType:function(t,e){t.libraryType=e},setLocale:function(t,e){t.locale=e}},actions:{initConfig:function(t){return Object(o["a"])(Object(i["a"])().m((function e(){var n,r,a,o;return Object(i["a"])().w((function(e){while(1)switch(e.p=e.n){case 0:return n=t.commit,r=t.dispatch,e.p=1,e.n=2,m();case 2:a=e.v,a.pathDirectory&&n("setPathDirectory",a.pathDirectory),a.locale&&n("setLocale",a.locale),e.n=4;break;case 3:e.p=3,o=e.v,r("notifications/error",{text:"Ошибка загрузки конфига: ".concat(o.message)},{root:!0});case 4:return e.a(2)}}),e,null,[[1,3]])})))()},persistConfig:function(t){return Object(o["a"])(Object(i["a"])().m((function e(){var n,r,a;return Object(i["a"])().w((function(e){while(1)switch(e.p=e.n){case 0:return n=t.state,r=t.dispatch,e.p=1,e.n=2,b({pathDirectory:n.pathDirectory,locale:n.locale});case 2:e.n=4;break;case 3:e.p=3,a=e.v,r("notifications/error",{text:"Ошибка сохранения конфига: ".concat(a.message)},{root:!0});case 4:return e.a(2)}}),e,null,[[1,3]])})))()},updatePathDirectory:function(t,e){return Object(o["a"])(Object(i["a"])().m((function n(){var r,a;return Object(i["a"])().w((function(n){while(1)switch(n.n){case 0:return r=t.commit,a=t.dispatch,r("setPathDirectory",e),n.n=1,a("persistConfig");case 1:return n.a(2)}}),n)})))()},updateLocale:function(t,e){return Object(o["a"])(Object(i["a"])().m((function n(){var r,a;return Object(i["a"])().w((function(n){while(1)switch(n.n){case 0:return r=t.commit,a=t.dispatch,r("setLocale",e),n.n=1,a("persistConfig");case 1:return n.a(2)}}),n)})))()}}},y=(n("4de4"),n("caad"),n("e9f5"),n("910d"),n("d3b7"),n("6062"),n("1e70"),n("79a4"),n("c1a1"),n("8b00"),n("a4e7"),n("1e5a"),n("72c3"),n("2532"),n("3ca3"),n("ddb0"),c.a.promises),_=new Set([".DS_Store","Thumbs.db"]),w={namespaced:!0,actions:{detectLibraryType:function(t,e){return Object(o["a"])(Object(i["a"])().m((function n(){var r,a,o,s;return Object(i["a"])().w((function(n){while(1)switch(n.p=n.n){case 0:return r=t.dispatch,n.p=1,n.n=2,y.readdir(e);case 2:if(a=n.v,!a.includes("manifest.json")){n.n=3;break}return n.a(2,"our");case 3:if(o=a.filter((function(t){return!_.has(t)})),0!==o.length){n.n=4;break}return n.a(2,"new");case 4:return n.a(2,"invalid");case 5:return n.p=5,s=n.v,r("notifications/error",{text:"Ошибка при определении папки: ".concat(s.message)},{root:!0}),n.a(2,"error")}}),n,null,[[1,5]])})))()},initLibrary:function(t,e){return Object(o["a"])(Object(i["a"])().m((function n(){var r,a,o,s,c;return Object(i["a"])().w((function(n){while(1)switch(n.p=n.n){case 0:return r=t.dispatch,n.n=1,r("detectLibraryType",e);case 1:if(a=n.v,"error"!==a&&"invalid"!==a){n.n=2;break}return"invalid"===a&&r("notifications/error",{text:"Папка содержит файлы/папки без manifest.json. Выберите пустую папку или библиотеку EZImport."},{root:!0}),n.a(2,!1);case 2:if("new"!==a){n.n=6;break}return o=u.a.join(e,"manifest.json"),n.p=3,s={libraryName:"EZImport Library",created:(new Date).toISOString(),version:"1.0.0",categories:[]},n.n=4,y.writeFile(o,JSON.stringify(s,null,2));case 4:n.n=6;break;case 5:return n.p=5,c=n.v,r("notifications/error",{text:"Не удалось создать manifest.json: ".concat(c.message)},{root:!0}),n.a(2,!1);case 6:return n.n=7,r("config/updateLibraryType",a,{root:!0});case 7:return n.n=8,r("config/updatePathDirectory",e,{root:!0});case 8:return r("notifications/info",{text:"Библиотека инициализирована"},{root:!0}),n.a(2,!0)}}),n,null,[[3,5]])})))()}}},j=(n("a732"),{namespaced:!0,state:function(){return{loaders:{}}},getters:{isLoading:function(t){return Object.keys(t.loaders).length>0},isLoadingByKey:function(t){return function(e){return!!t.loaders[e]}},isLoadingByKeys:function(t){return function(e){return e.some((function(e){return!!t.loaders[e]}))}}},mutations:{START:function(t,e){r["a"].set(t.loaders,e,!0)},STOP:function(t,e){r["a"].delete(t.loaders,e)},RESET:function(t){t.loaders={}}},actions:{start:function(t,e){var n=t.commit;n("START",e)},stop:function(t,e){var n=t.commit;n("STOP",e)},reset:function(t){var e=t.commit;e("RESET")}}}),O=(n("7db0"),n("d81d"),n("4e82"),n("b0c0"),n("f665"),n("ab43"),n("498a"),n("ac1f"),n("5319"),n("2ca0"),c.a.promises),C=new Set([".DS_Store","Thumbs.db","desktop.ini"]);function k(t){return x.apply(this,arguments)}function x(){return x=Object(o["a"])(Object(i["a"])().m((function t(e){var n;return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:return t.n=1,O.readdir(e).catch((function(){return[]}));case 1:return n=t.v,t.a(2,n.filter((function(t){return!!t&&!C.has(t)&&!t.startsWith(".")})))}}),t)}))),x.apply(this,arguments)}function S(t){return $.apply(this,arguments)}function $(){return $=Object(o["a"])(Object(i["a"])().m((function t(e){return Object(i["a"])().w((function(t){while(1)switch(t.p=t.n){case 0:return t.p=0,t.n=1,O.lstat(e);case 1:return t.a(2,t.v.isDirectory());case 2:return t.p=2,t.v,t.a(2,!1)}}),t,null,[[0,2]])}))),$.apply(this,arguments)}function E(t,e){return e.map((function(e){return{name:e,path:u.a.join(t,e),format:u.a.extname(e).toLowerCase()}}))}function L(t){return P.apply(this,arguments)}function P(){return P=Object(o["a"])(Object(i["a"])().m((function t(e){var n;return Object(i["a"])().w((function(t){while(1)switch(t.p=t.n){case 0:return t.p=0,t.n=1,O.readdir(e,{withFileTypes:!0});case 1:return n=t.v,t.a(2,n.filter((function(t){return t.isDirectory()&&!C.has(t.name)&&!t.name.startsWith(".")&&"manifest.json"!==t.name})).map((function(t){return t.name})));case 2:return t.p=2,t.v,t.a(2,[])}}),t,null,[[0,2]])}))),P.apply(this,arguments)}var T=n("b85c"),M=(n("99af"),n("00b4"),/[<>:"/\\|?*\x00-\x1F]/g),D=/^[.\s]+|[.\s]+$/g,F=/^(con|prn|aux|nul|com[1-9]|lpt[1-9])$/i;function N(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:240,r="",a=0,i=Object(T["a"])(t);try{for(i.s();!(e=i.n()).done;){var o=e.value,s=Buffer.byteLength(o,"utf8");if(a+s>n)break;r+=o,a+=s}}catch(c){i.e(c)}finally{i.f()}return r}function A(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-",n=String(t||"").normalize("NFKC").replace(M,e).replace(/\s+/g," ").replace(/-{2,}/g,"-").trim().replace(D,"");return("."===n||".."===n||F.test(n))&&(n="".concat(n,"-item")),n=N(n,240),n||(n="untitled"),n}function z(t,e){return B.apply(this,arguments)}function B(){return B=Object(o["a"])(Object(i["a"])().m((function t(e,n){var r,a,o,s;return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:r=A(n),a=r,o=2,s=u.a.join(e,a);case 1:return t.n=2,c.a.promises.stat(s).then((function(){return!0})).catch((function(){return!1}));case 2:if(!t.v){t.n=3;break}a="".concat(r," (").concat(o++,")"),s=u.a.join(e,a),t.n=1;break;case 3:return t.a(2,{dirPath:s,dirName:a,safeBaseName:r})}}),t)}))),B.apply(this,arguments)}var I={namespaced:!0,state:function(){return{categories:[],searchField:"",currentCategory:null}},mutations:{setCategories:function(t,e){t.categories=e,e.length||(t.currentCategory=null)},setCurrentCategory:function(t,e){t.currentCategory=e},setSearchField:function(t,e){t.searchField=e}},actions:{fetchCategories:function(t){return Object(o["a"])(Object(i["a"])().m((function e(){var n,r,a,s,c,l,p,f,d,m;return Object(i["a"])().w((function(e){while(1)switch(e.p=e.n){case 0:if(n=t.commit,r=t.dispatch,a=t.rootState,s=t.state,c=a.config.pathDirectory,c){e.n=1;break}return r("notifications/error",{text:"Папка не выбрана"},{root:!0}),e.a(2);case 1:return e.p=1,e.n=2,L(c);case 2:return l=e.v,e.n=3,Promise.all(l.map(function(){var t=Object(o["a"])(Object(i["a"])().m((function t(e){var n,a;return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:return n=u.a.join(c,e),t.n=1,r("compositions/fetchCompositions",n,{root:!0});case 1:return a=t.v,t.a(2,{name:e,path:n,compositions:a})}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 3:p=e.v,p.sort((function(t,e){return t.name.localeCompare(e.name)})),n("setCategories",p),s.currentCategory?(f=s.currentCategory,d=p.find((function(t){return t.path===f.path||t.name===f.name})),n("setCurrentCategory",d||null)):p.length&&n("setCurrentCategory",p[0]),r("notifications/info",{text:"Категории обновлены",silent:!0},{root:!0}),e.n=5;break;case 4:e.p=4,m=e.v,r("notifications/error",{text:"Ошибка при чтении папки: ".concat(m.message)},{root:!0});case 5:return e.a(2)}}),e,null,[[1,4]])})))()},createCategory:function(t,e){return Object(o["a"])(Object(i["a"])().m((function n(){var r,a,o,s,l,u,p,f,d;return Object(i["a"])().w((function(n){while(1)switch(n.p=n.n){case 0:if(r=t.rootState,a=t.dispatch,o=r.config.pathDirectory,o){n.n=1;break}return a("notifications/error",{text:"Папка не выбрана"},{root:!0}),n.a(2);case 1:if(n.p=1,s=(e||"").trim(),s){n.n=2;break}return a("notifications/warn",{text:"Укажите имя категории"},{root:!0}),n.a(2);case 2:if(l=A(s),l){n.n=3;break}return a("notifications/error",{text:"Недопустимое имя категории"},{root:!0}),n.a(2);case 3:return n.n=4,z(o,l);case 4:return u=n.v,p=u.dirPath,f=u.dirName,n.n=5,c.a.promises.mkdir(p,{recursive:!0});case 5:return n.n=6,a("fetchCategories");case 6:a("notifications/info",{text:'Категория "'.concat(f,'" создана')},{root:!0}),n.n=8;break;case 7:n.p=7,d=n.v,a("notifications/error",{text:"Ошибка при создании категории: ".concat(d.message)},{root:!0});case 8:return n.a(2)}}),n,null,[[1,7]])})))()}},getters:{getFilteredCategories:function(t){if(!t.searchField)return t.categories;var e=t.searchField.toLowerCase();return t.categories.filter((function(t){return t.name.toLowerCase().includes(e)}))},getCategories:function(t){return t.categories},getCurrentCategory:function(t){return t.currentCategory}}},V=(n("14d9"),n("a9e3"),n("ebe6")),R=[".aep",".mov"],q=[".gif",".png",".jpg",".jpeg",".webp"];function J(t){for(var e,n=function(){var e=a[r],n=t.find((function(t){return t.format===e}));if(n)return{v:n.path}},r=0,a=q;r<a.length;r++)if(e=n(),e)return e.v;return null}var K={namespaced:!0,actions:{fetchCompositions:function(t,e){return Object(o["a"])(Object(i["a"])().m((function n(){var r,a,o,s,c,l,p,f,d,m,h,b,g,v,y;return Object(i["a"])().w((function(n){while(1)switch(n.p=n.n){case 0:return r=t.dispatch,n.p=1,n.n=2,L(e);case 2:a=n.v,o=[],s=Object(T["a"])(a),n.p=3,s.s();case 4:if((c=s.n()).done){n.n=8;break}return l=c.value,p=u.a.join(e,l),n.n=5,k(p);case 5:if(f=n.v,d=E(p,f),m=d.filter((function(t){return R.includes(t.format)})),m.length){n.n=6;break}return n.a(3,7);case 6:h=m.map((function(t){return t.format})),b=m.map((function(t){return t.path})),g=J(d),o.push({name:l,path:p,files:d,formats:h,filesPaths:b,previewPath:g});case 7:n.n=4;break;case 8:n.n=10;break;case 9:n.p=9,v=n.v,s.e(v);case 10:return n.p=10,s.f(),n.f(10);case 11:return n.a(2,o);case 12:return n.p=12,y=n.v,r("notifications/error",{text:"Ошибка при чтении композиций: ".concat(y.message)},{root:!0}),n.a(2,[])}}),n,null,[[3,9,10,11],[1,12]])})))()},fetchFiles:function(t,e){return Object(o["a"])(Object(i["a"])().m((function t(){var n;return Object(i["a"])().w((function(t){while(1)switch(t.p=t.n){case 0:return t.p=0,t.n=1,S(e);case 1:if(t.v){t.n=2;break}return t.a(2,[]);case 2:return t.n=3,k(e);case 3:return n=t.v,t.a(2,E(e,n));case 4:return t.p=4,t.v,t.a(2,[])}}),t,null,[[0,4]])})))()},saveComposition:function(t,e){return Object(o["a"])(Object(i["a"])().m((function n(){var r,a,o,s,l,u,p,f,d,m,h,b,g;return Object(i["a"])().w((function(n){while(1)switch(n.p=n.n){case 0:if(r=t.dispatch,a=e.compTitle,o=e.category,s=e.options,l=void 0===s?{}:s,n.p=1,null!==o&&void 0!==o&&o.path){n.n=2;break}return r("notifications/error",{text:"Категория не выбрана"},{root:!0}),n.a(2,!1);case 2:return u=function(t){return String(t||"").replace(/\.[^.]+$/,"")},p=A(u(a)||"Composition"),n.n=3,z(o.path,p);case 3:return f=n.v,d=f.dirPath,m=f.dirName,n.n=4,c.a.promises.mkdir(d,{recursive:!0});case 4:return h={destDir:d.replace(/\\/g,"/"),title:p,wantMov:!!l.mov,pngAtSeconds:Number(l.pngAtSeconds||0)},n.n=5,Object(V["b"])("AE_PackageActiveCompAtomic(".concat(JSON.stringify(h),")"));case 5:if(b=n.v,b.ok){n.n=6;break}return r("notifications/error",{text:"Ошибка упаковки (".concat(b.error||"unknown","): ").concat(b.errorDetail||"")},{root:!0}),n.a(2,!1);case 6:return n.n=7,r("categories/fetchCategories",null,{root:!0});case 7:return r("notifications/info",{text:'Композиция "'.concat(m,'" сохранена')},{root:!0}),n.a(2,!0);case 8:return n.p=8,g=n.v,r("notifications/error",{text:"Ошибка: ".concat(g.message)},{root:!0}),n.a(2,!1)}}),n,null,[[1,8]])})))()}}},U=(n("a434"),{namespaced:!0,state:function(){return{items:[]}},mutations:{add:function(t,e){var n=e.type,r=e.text,a=e.silent,i=void 0!==a&&a,o={type:n,text:r,time:Date.now()};console[n]?console[n](o):console.log(o),i||t.items.push(o)},clear:function(t){t.items=[]},remove:function(t,e){t.items.splice(e,1)}},actions:{error:function(t,e){var n=t.commit,r=e.text,a=e.silent,i=void 0!==a&&a;n("add",{type:"error",text:r,silent:i})},warn:function(t,e){var n=t.commit,r=e.text,a=e.silent,i=void 0!==a&&a;n("add",{type:"warn",text:r,silent:i})},info:function(t,e){var n=t.commit,r=e.text,a=e.silent,i=void 0!==a&&a;n("add",{type:"info",text:r,silent:i})},clear:function(t){var e=t.commit;e("clear")},logOnly:function(t,e){var n=t.commit,r=e.type,a=e.text;n("add",{type:r,text:a,silent:!0})}},getters:{all:function(t){return t.items},last:function(t){return t.items[t.items.length-1]||null},infos:function(t){return t.items.filter((function(t){return"info"===t.type}))},errors:function(t){return t.items.filter((function(t){return"error"===t.type}))},warnings:function(t){return t.items.filter((function(t){return"warn"===t.type}))}}});r["a"].use(a["a"]);var Z=new a["a"].Store({modules:{config:v,library:w,loading:j,categories:I,compositions:K,notifications:U}}),H=function(){var t=this,e=t._self._c;return e("sp-theme",{attrs:{id:"app",color:t.appTheme,system:"spectrum",scale:"medium",dir:"ltr"}},[e("Panel",[e("transition",{attrs:{name:"fade",mode:"out-in"}},[e("router-view")],1),t._v(" "),e("Menus",{attrs:{refresh:"",debug:""}}),t._v(" "),e("Toast")],1)],1)},G=[];function W(){var t=JSON.parse(window.__adobe_cep__.getHostEnvironment()).appSkinInfo.panelBackgroundColor.color.red;return t>50?"light":t>30?"dark":"darkest"}function Q(t){return window.getComputedStyle(document.documentElement).getPropertyValue("".concat(/^\-\-/.test(t)?t:"--"+t))}function X(t,e){document.documentElement.style.setProperty("".concat(/^\-\-/.test(t)?t:"--"+t),e)}var Y=n("1a8c"),tt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"z-50 notifications"},t._l(t.notifications,(function(n,r){return e("sp-toast",{key:n.time,attrs:{size:"s",timeout:"3000",open:t.open,variant:t.mapTypeToVariant(n.type),"icon-label":n.type}},[t._v("\n            "+t._s(n.text)+"\n        ")])})),1)},et=[],nt=n("5530"),rt={name:"Toast",data:{open:!1},computed:Object(nt["a"])(Object(nt["a"])({},Object(a["c"])("notifications",["all"])),{},{notifications:function(){return this.open=!0,this.all}}),methods:Object(nt["a"])(Object(nt["a"])({},Object(a["d"])("notifications",["remove"])),{},{mapTypeToVariant:function(t){switch(t){case"error":return"negative";case"warn":return"warning";case"info":return"info";default:return"info"}}})},at=rt,it=(n("2a89"),n("2877")),ot=Object(it["a"])(at,tt,et,!1,null,"2a04f676",null),st=ot.exports,ct={name:"App",components:{Menus:Y["a"],Panel:Y["b"],Toast:st},mounted:function(){var t=this;return Object(o["a"])(Object(i["a"])().m((function e(){return Object(i["a"])().w((function(e){while(1)switch(e.n){case 0:t.$store.dispatch("config/initConfig"),t.$store.state.pathDirectory&&t.$store.dispatch("categories/fetchCategories");case 1:return e.a(2)}}),e)})))()},methods:{getCSS:Q,setCSS:X},watch:{appTheme:function(t){this.setCSS("--app-theme",t)}},computed:{appTheme:function(){return W()},appThemeVersion:{get:function(){return this.$store.state.config.appThemeVersion},set:function(t){this.$store.commit("config/setAppThemeVersion",t)}}}},lt=ct,ut=Object(it["a"])(lt,H,G,!1,null,null,null),pt=ut.exports,ft=n("8c4f"),dt=function(){var t=this,e=t._self._c;return e("main",{staticClass:"flex flex-col justify-between h-full"},[e("div",{staticClass:"flex h-full gap-4 overflow-hidden"},[e("LibrarySidebar"),t._v(" "),e("LibraryContent")],1)])},mt=[],ht=function(){var t=this,e=t._self._c;return e("div",{staticClass:"sticky top-0 z-50",staticStyle:{"max-width":"170px"}},[e("div",{staticClass:"flex flex-col justify-between h-full"},[e("sp-sidenav",{staticClass:"w-full"},[t.getFilteredCategories.length?e("sp-sidenav-heading",{attrs:{label:t.$t("sidebar.title")}},t._l(t.getFilteredCategories,(function(n){return e("sp-sidenav-item",{key:n.name,attrs:{value:n.name,label:n.name},on:{click:function(e){return t.setCurrentCategory(n)}}},[e("sp-icon-folder",{attrs:{slot:"icon"},slot:"icon"})],1)})),1):t._e()],1),t._v(" "),e("sp-action-group",{attrs:{size:"s",vertical:""}},[e("sp-action-button",{attrs:{id:"create-category"}},[t._v("\n                "+t._s(t.$t("buttons.new_category"))+"\n            ")]),t._v(" "),e("sp-action-button",{attrs:{id:"create-composition",disabled:!t.canCreateComposition},on:{click:t.onNewCompositionClick}},[t._v("\n                "+t._s(t.$t("buttons.new_composition"))+"\n            ")])],1)],1),t._v(" "),e("DialogCategory"),t._v(" "),e("DialogComposition")],1)},bt=[],gt=(n("712a"),function(){var t=this,e=t._self._c;return e("sp-overlay",{attrs:{trigger:"create-category@click"}},[e("sp-dialog-base",{staticClass:"h-full",attrs:{dismissable:"",underlay:""}},[e("sp-dialog",{attrs:{size:"s"}},[e("h2",{staticClass:"text-lg font-bold",attrs:{slot:"heading"},slot:"heading"},[t._v("\n                "+t._s(t.$t("buttons.new_category"))+"\n            ")]),t._v(" "),e("sp-textfield",{ref:"input",staticClass:"w-full",attrs:{id:t.id,type:"text",value:t.name,placeholder:t.$t("categories.name"),disabled:t.loading,invalid:!!t.localError,pattern:".*\\S.*",required:""},on:{input:function(e){t.name=e.target.value},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.trySave.apply(null,arguments)}}},[t.localError?e("sp-help-text",{attrs:{slot:"negative-help-text"},slot:"negative-help-text"},[t._v("\n                    "+t._s(t.localError)+"\n                ")]):t._e()],1),t._v(" "),e("sp-button-group",{attrs:{slot:"button",size:"s"},slot:"button"},[e("sp-button",{attrs:{onclick:"this.dispatchEvent(new Event('close', { bubbles: true, composed: true }));"}},[t._v("\n                    "+t._s(t.$t("buttons.cancel"))+"\n                ")]),t._v(" "),e("sp-button",{attrs:{disabled:!t.name,pending:t.loading},on:{click:t.trySave}},[t._v("\n                    "+t._s(t.loading?t.$t("buttons.saving"):t.$t("buttons.save"))+"\n                ")])],1)],1)],1)],1)}),vt=[],yt=(n("fb6a"),n("25f0"),{name:"DialogCategory",props:{id:{type:String,default:function(){return"cat-input-".concat(Math.random().toString(36).slice(2))}}},data:function(){return{name:"",localError:""}},computed:{loading:function(){return this.$store.getters["loading/isLoadingByKey"]("categories:create")}},methods:Object(nt["a"])(Object(nt["a"])({},Object(a["b"])("categories",["createCategory","fetchCategories"])),{},{trySave:function(t){var e=this;return Object(o["a"])(Object(i["a"])().m((function n(){var r,a,o,s;return Object(i["a"])().w((function(n){while(1)switch(n.p=n.n){case 0:if(e.localError="",a=(null===(r=e.$refs.input)||void 0===r?void 0:r.focusElement)||e.$refs.input,a.checkValidity()){n.n=1;break}return e.localError=a.validationMessage,n.a(2);case 1:return e.$store.dispatch("loading/start","categories:create"),n.p=2,o=e.name.trim(),n.n=3,e.createCategory(o);case 3:return n.n=4,e.fetchCategories();case 4:e.name="",e.localError="",t.target.dispatchEvent(new Event("close",{bubbles:!0,composed:!0})),n.n=6;break;case 5:n.p=5,s=n.v,e.localError=String((null===s||void 0===s?void 0:s.message)||e.$t("errors.unknown"));case 6:return n.p=6,e.$store.dispatch("loading/stop","categories:create"),n.f(6);case 7:return n.a(2)}}),n,null,[[2,5,6,7]])})))()}})}),_t=yt,wt=Object(it["a"])(_t,gt,vt,!1,null,null,null),jt=wt.exports,Ot=function(){var t=this,e=t._self._c;return e("sp-overlay",{attrs:{trigger:"create-composition@click"}},[e("sp-dialog-base",{staticClass:"h-full",attrs:{dismissable:"",underlay:""}},[e("sp-dialog",{attrs:{size:"s"}},[e("h2",{staticClass:"text-lg font-bold",attrs:{slot:"heading"},slot:"heading"},[t._v("\n                "+t._s(t.$t("buttons.new_composition"))+"\n            ")]),t._v(" "),e("sp-field-label",{attrs:{for:"with-field-label"}},[t._v(t._s(t.$t("compositions.generate_formats")))]),t._v(" "),e("sp-field-group",{attrs:{horizontal:"",id:"formats"}},t._l(t.options,(function(n){return e("sp-checkbox",{key:n.value,attrs:{checked:n.checked,disabled:n.disabled||t.loading},on:{change:function(t){n.checked=t.target.checked}}},[t._v("\n                    "+t._s(n.label)+"\n                ")])})),1),t._v(" "),e("sp-textfield",{ref:"input",staticClass:"w-full mt-3",attrs:{id:t.id,type:"text",value:t.name,placeholder:t.$t("compositions.name"),disabled:t.loading,invalid:!!t.localError,pattern:".*\\S.*",required:""},on:{input:function(e){t.name=e.target.value},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.trySave.apply(null,arguments)}}},[t.localError?e("sp-help-text",{attrs:{slot:"negative-help-text"},slot:"negative-help-text"},[t._v("\n                    "+t._s(t.localError)+"\n                ")]):t._e()],1),t._v(" "),e("sp-button-group",{attrs:{slot:"button",size:"s"},slot:"button"},[e("sp-button",{attrs:{onclick:"this.dispatchEvent(new Event('close', { bubbles: true, composed: true }));"}},[t._v("\n                    "+t._s(t.$t("buttons.cancel"))+"\n                ")]),t._v(" "),e("sp-button",{attrs:{disabled:!t.name,pending:t.loading},on:{click:t.trySave}},[t._v("\n                    "+t._s(t.loading?t.$t("buttons.saving"):t.$t("buttons.save"))+"\n                ")])],1)],1)],1)],1)},Ct=[],kt={name:"DialogComposition",props:{id:{type:String,default:function(){return"comp-input-".concat(Math.random().toString(36).slice(2))}}},data:function(){return{name:"",localError:"",options:{aep:{label:"AEP",value:"aep",checked:!0,disabled:!0},mov:{label:"MOV",value:"mov",checked:!1,disabled:!0},gif:{label:"GIF (preview)",value:"gif",checked:!1,disabled:!0}}}},computed:Object(nt["a"])(Object(nt["a"])({},Object(a["c"])("categories",["getCurrentCategory"])),{},{loading:function(){return this.$store.getters["loading/isLoadingByKey"]("compositions:create")}}),watch:{"options.gif.checked":function(t){t&&!this.options.mov.checked&&(this.options.mov.checked=!0)},"options.mov.checked":function(t){!t&&this.options.gif.checked&&(this.options.gif.checked=!1)}},methods:Object(nt["a"])(Object(nt["a"])({},Object(a["b"])("compositions",["saveComposition"])),{},{trySave:function(t){var e=this;return Object(o["a"])(Object(i["a"])().m((function n(){var r,a,o,s,c,l;return Object(i["a"])().w((function(n){while(1)switch(n.p=n.n){case 0:if(e.localError="",a=(e.name||"").trim(),o=(null===(r=e.$refs.input)||void 0===r?void 0:r.focusElement)||e.$refs.input,o.checkValidity()){n.n=1;break}return e.localError=o.validationMessage,n.a(2);case 1:if(e.getCurrentCategory){n.n=2;break}return e.localError=e.$t("errors.category_not_selected")||"Категория не выбрана",n.a(2);case 2:return e.$store.dispatch("loading/start","compositions:create"),n.p=3,n.n=4,Object(V["b"])("AE_GetActiveCompName()");case 4:if(s=n.v,s){n.n=5;break}return e.localError=e.$t("compositions.error_no_compositions")||"В After Effects нет активной композиции",n.a(2);case 5:return n.n=6,e.saveComposition({compName:s,compTitle:a,category:e.getCurrentCategory,options:{mov:e.options.mov.checked,gif:e.options.gif.checked}});case 6:c=n.v,c&&t.target.dispatchEvent(new Event("close",{bubbles:!0,composed:!0})),n.n=8;break;case 7:n.p=7,l=n.v,e.localError=String((null===l||void 0===l?void 0:l.message)||e.$t("errors.unknown"));case 8:return n.p=8,e.$store.dispatch("loading/stop","compositions:create"),n.f(8);case 9:return n.a(2)}}),n,null,[[3,7,8,9]])})))()}})},xt=kt,St=Object(it["a"])(xt,Ot,Ct,!1,null,null,null),$t=St.exports,Et={name:"SidebarComponent",components:{DialogCategory:jt,DialogComposition:$t},data:function(){return{dialogComposition:!1}},computed:Object(nt["a"])(Object(nt["a"])({},Object(a["c"])("categories",["getFilteredCategories","getCurrentCategory"])),{},{currentCategory:{get:function(){return this.getCurrentCategory},set:function(t){this.setCurrentCategory(t)}},canCreateComposition:function(){return!!this.currentCategory}}),methods:Object(nt["a"])(Object(nt["a"])({},Object(a["d"])("categories",["setCurrentCategory"])),{},{onNewCompositionClick:function(t){var e=this;return Object(o["a"])(Object(i["a"])().m((function n(){return Object(i["a"])().w((function(n){while(1)switch(n.n){case 0:if(e.currentCategory){n.n=1;break}return n.a(2);case 1:t.target.dispatchEvent(new Event("open",{bubbles:!0,composed:!0}));case 2:return n.a(2)}}),n)})))()}})},Lt=Et,Pt=Object(it["a"])(Lt,ht,bt,!1,null,null,null),Tt=Pt.exports,Mt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex flex-col w-full gap-4 mt-3"},[e("div",{staticClass:"flex gap-2"},[e("sp-action-menu",{attrs:{size:"s",disabled:""}},[e("sp-icon-settings",{attrs:{slot:"icon"},slot:"icon"}),t._v(" "),e("sp-menu-item",[t._v(" Deselect ")]),t._v(" "),e("sp-menu-item",[t._v(" Select inverse ")]),t._v(" "),e("sp-menu-item",[t._v(" Feather... ")]),t._v(" "),e("sp-menu-item",[t._v(" Select and mask... ")]),t._v(" "),e("sp-menu-divider"),t._v(" "),e("sp-menu-item",[t._v(" Save selection ")]),t._v(" "),e("sp-menu-item",{attrs:{disabled:""}},[t._v(" Make work path ")])],1),t._v(" "),e("sp-search",{staticClass:"w-full",attrs:{disabled:"",size:"s"}})],1),t._v(" "),t.getCurrentCategory?e("div",{key:t.getCurrentCategory?t.compositions.length?"list":"empty":"no-cat",staticClass:"w-full h-full"},[t.compositions.length?e("div",{staticClass:"flex flex-wrap gap-4"},t._l(t.compositions,(function(t,n){return e("CardComposition",{key:t.path||t.name,attrs:{composition:t,index:n}})})),1):e("MessageEmpty",{attrs:{title:t.$t("illustratedMessage.category_empty_title"),description:t.$t("illustratedMessage.category_empty_description")}})],1):e("MessageEmpty"),t._v(" "),e("MadeBy")],1)},Dt=[],Ft=(n("cb29"),n("96de"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex items-center justify-between",staticStyle:{color:"var(--spectrum-accent-visual-color)"}},[e("span",[t._v("made by: "+t._s(t.author))]),t._v(" "),e("span",[t._v("version: "+t._s(t.version)+" ")])])}),Nt=[],At={name:"MadeBy",data:function(){return{author:"A&I ROMANOV's",version:"2.1.4"}}},zt=At,Bt=Object(it["a"])(zt,Ft,Nt,!1,null,null,null),It=Bt.exports,Vt=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{"max-width":"calc(100% / 3)","min-width":"150px"}},[e("sp-card",{attrs:{heading:t.composition.name,variant:"gallery"}},[e("img",{attrs:{slot:"preview",alt:"",src:t.url},slot:"preview"}),t._v(" "),e("div",{attrs:{slot:"actions"},slot:"actions"},[e("sp-action-group",{attrs:{size:"s",compact:""}},[t._l(t.composition.formats,(function(n,r){return e("sp-action-button",{key:n,attrs:{"aria-label":"".concat(t.composition.name," • ").concat(n),disabled:t.loading},on:{click:function(e){return t.importFormat(n,t.composition.filesPaths[r])}}},[e("span",[t._v(t._s(n))]),t._v(" "),t.instanceLoading[n]?e("sp-progress-circle",{attrs:{slot:"icon",size:"s",indeterminate:""},slot:"icon"}):t._e()],1)})),t._v(" "),e("sp-action-button",{attrs:{label:"Edit","hold-affordance":"",disabled:t.loading},on:{click:function(e){return t.openFolder(t.composition.previewPath)}}},[e("sp-icon-folder-open-outline",{attrs:{slot:"icon"},slot:"icon"})],1)],2)],1)])],1)},Rt=[],qt=n("ade3"),Jt=n("3835"),Kt=n("d4ec"),Ut=n("bee2"),Zt=(n("4ec9"),n("2b3d"),n("bf19"),n("9861"),n("88a7"),n("271a"),n("5494"),n("f8da")),Ht=n.n(Zt),Gt={".png":"image/png",".jpg":"image/jpeg",".jpeg":"image/jpeg",".gif":"image/gif",".webp":"image/webp"},Wt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;Object(Kt["a"])(this,t),this.limit=e,this.map=new Map}return Object(Ut["a"])(t,[{key:"get",value:function(t){if(this.map.has(t)){var e=this.map.get(t);return this.map.delete(t),this.map.set(t,e),e}}},{key:"set",value:function(t,e){if(this.map.has(t)&&this.map.delete(t),this.map.set(t,e),this.map.size>this.limit){var n=this.map.keys(),r=Object(Jt["a"])(n,1),a=r[0];this.delete(a)}}},{key:"delete",value:function(t){var e=this.map.get(t);e&&URL.revokeObjectURL(e),this.map.delete(t)}},{key:"clear",value:function(){var t,e=Object(T["a"])(this.map);try{for(e.s();!(t=e.n()).done;){var n=Object(Jt["a"])(t.value,2),r=n[1];URL.revokeObjectURL(r)}}catch(a){e.e(a)}finally{e.f()}this.map.clear()}}])}(),Qt=new Wt(80);function Xt(t){return Yt.apply(this,arguments)}function Yt(){return Yt=Object(o["a"])(Object(i["a"])().m((function t(e){var n,r,a,o;return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:if(e){t.n=1;break}return t.a(2,"");case 1:if(n=Qt.get(e),!n){t.n=2;break}return t.a(2,n);case 2:return t.n=3,Ht.a.readFile(e);case 3:return r=t.v,a=Gt[u.a.extname(e).toLowerCase()]||"application/octet-stream",o=URL.createObjectURL(new Blob([r],{type:a})),Qt.set(e,o),t.a(2,o)}}),t)}))),Yt.apply(this,arguments)}function te(t){Qt.delete(t)}n("ab1b");var ee={name:"CardComposition",props:{index:{type:Number,required:!0},composition:{type:Object,required:!0}},data:function(){return{url:"",instanceLoading:{}}},mounted:function(){this.observe()},beforeDestroy:function(){this.url&&(te(this.composition.previewPath),this.url="")},computed:{loading:function(){return this.$store.getters["loading/isLoadingByKey"]("composition:format:import")}},methods:{observe:function(){var t=this,e=new IntersectionObserver(function(){var e=Object(o["a"])(Object(i["a"])().m((function e(n){var r,a,o,s;return Object(i["a"])().w((function(e){while(1)switch(e.p=e.n){case 0:!1,r=Object(T["a"])(n),e.p=1,r.s();case 2:if((a=r.n()).done){e.n=7;break}if(o=a.value,!o.isIntersecting){e.n=5;break}if(!0,t.url||!t.composition.previewPath){e.n=4;break}return e.n=3,Xt(t.composition.previewPath);case 3:t.url=e.v;case 4:e.n=6;break;case 5:!1,t.url&&(te(t.composition.previewPath),t.url="");case 6:e.n=2;break;case 7:e.n=9;break;case 8:e.p=8,s=e.v,r.e(s);case 9:return e.p=9,r.f(),e.f(9);case 10:return e.a(2)}}),e,null,[[1,8,9,10]])})));return function(t){return e.apply(this,arguments)}}(),{root:null,threshold:.1});e.observe(this.$el),this._io=e},delay:function(t){return new Promise((function(e){return setTimeout(e,t)}))},importFormat:function(t,e){var n=this;return Object(o["a"])(Object(i["a"])().m((function r(){var a,o,s;return Object(i["a"])().w((function(r){while(1)switch(r.p=r.n){case 0:if(e){r.n=1;break}return r.a(2);case 1:return n.instanceLoading=Object(nt["a"])(Object(nt["a"])({},n.instanceLoading),{},Object(qt["a"])({},t,!0)),n.$store.dispatch("loading/start","composition:format:import"),r.p=2,a=e.replace(/\\/g,"/"),r.n=3,Object(V["b"])('AE_ImportFile("'.concat(a,'")'));case 3:r.n=5;break;case 4:return r.p=4,s=r.v,o=String(s).replace(/["\\]/g,"\\$&").replace(/\n/g,"\\n"),r.n=5,Object(V["b"])('alert("'.concat(o,'")'));case 5:return r.p=5,n.instanceLoading=Object(nt["a"])(Object(nt["a"])({},n.instanceLoading),{},Object(qt["a"])({},t,!1)),n.$store.dispatch("loading/stop","composition:format:import"),r.f(5);case 6:return r.a(2)}}),r,null,[[2,4,5,6]])})))()},openFolder:function(t){var e=this;return Object(o["a"])(Object(i["a"])().m((function n(){var r,a,o;return Object(i["a"])().w((function(n){while(1)switch(n.p=n.n){case 0:if(t){n.n=1;break}return n.a(2);case 1:return n.p=1,r=t.replace(/\\/g,"/"),n.n=2,Object(V["b"])('AE_OpenFolder("'.concat(r,'")'));case 2:a=n.v,"ok"!==a&&e.$store.dispatch("notifications/error",{text:e.$t("errors.cannot_open_folder")},{root:!0}),n.n=4;break;case 3:n.p=3,o=n.v,e.$store.dispatch("notifications/error",{text:e.$t("errors.error_open_folder")+o.message},{root:!0});case 4:return n.a(2)}}),n,null,[[1,3]])})))()}}},ne=ee,re=Object(it["a"])(ne,Vt,Rt,!1,null,null,null),ae=re.exports,ie=(n("a4d3"),n("e01a"),function(){var t=this,e=t._self._c;return e("sp-illustrated-message",{attrs:{heading:t.title}},[e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 150 103",width:"150",height:"103"}},[e("path",{attrs:{d:"M133.7,8.5h-118c-1.9,0-3.5,1.6-3.5,3.5v27c0,0.8,0.7,1.5,1.5,1.5s1.5-0.7,1.5-1.5V23.5h119V92c0,0.3-0.2,0.5-0.5,0.5h-118c-0.3,0-0.5-0.2-0.5-0.5V69c0-0.8-0.7-1.5-1.5-1.5s-1.5,0.7-1.5,1.5v23c0,1.9,1.6,3.5,3.5,3.5h118c1.9,0,3.5-1.6,3.5-3.5V12C137.2,10.1,135.6,8.5,133.7,8.5z M15.2,21.5V12c0-0.3,0.2-0.5,0.5-0.5h118c0.3,0,0.5,0.2,0.5,0.5v9.5H15.2z M32.6,16.5c0,0.6-0.4,1-1,1h-10c-0.6,0-1-0.4-1-1s0.4-1,1-1h10C32.2,15.5,32.6,15.9,32.6,16.5z M13.6,56.1l-8.6,8.5C4.8,65,4.4,65.1,4,65.1c-0.4,0-0.8-0.1-1.1-0.4c-0.6-0.6-0.6-1.5,0-2.1l8.6-8.5l-8.6-8.5c-0.6-0.6-0.6-1.5,0-2.1c0.6-0.6,1.5-0.6,2.1,0l8.6,8.5l8.6-8.5c0.6-0.6,1.5-0.6,2.1,0c0.6,0.6,0.6,1.5,0,2.1L15.8,54l8.6,8.5c0.6,0.6,0.6,1.5,0,2.1c-0.3,0.3-0.7,0.4-1.1,0.4c-0.4,0-0.8-0.1-1.1-0.4L13.6,56.1z"}})]),t._v(" "),e("p",{attrs:{slot:"description"},slot:"description"},[t._v("\n       "+t._s(t.description)+"\n    ")])])}),oe=[],se={name:"MessageEmpty",props:{title:{type:String,default:function(){return this.$t("illustratedMessage.category_not_selected_title")}},description:{type:String,default:function(){return this.$t("illustratedMessage.category_not_selected_description")}}}},ce=se,le=(n("a9b6"),Object(it["a"])(ce,ie,oe,!1,null,null,null)),ue=le.exports,pe={name:"ContentComponent",components:{CardComposition:ae,MessageEmpty:ue,MadeBy:It},data:function(){return{loadingItem:[]}},computed:Object(nt["a"])(Object(nt["a"])({},Object(a["c"])("categories",["getCurrentCategory"])),{},{compositions:function(){var t;return(null===(t=this.getCurrentCategory)||void 0===t?void 0:t.compositions)||[]}}),watch:{compositions:{immediate:!0,handler:function(t){this.loadingItem=Array((t||[]).length).fill(!1)}}}},fe=pe,de=Object(it["a"])(fe,Mt,Dt,!1,null,null,null),me=de.exports,he={name:"LibraryPage",components:{LibrarySidebar:Tt,LibraryContent:me},computed:Object(nt["a"])({},Object(a["c"])("categories",["getCategories"])),created:function(){this.$store.dispatch("categories/fetchCategories")}},be=he,ge=Object(it["a"])(be,dt,mt,!1,null,null,null),ve=ge.exports,ye=function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex flex-col items-center justify-center max-w-lg gap-10 p-4 mx-auto"},[e("h2",{staticClass:"w-full m-0 text-2xl text-center"},[t._v("\n        "+t._s(t.title)+"\n    ")]),t._v(" "),e("div",{staticClass:"flex flex-col w-full gap-4"},[e("sp-textfield",{ref:"file",staticClass:"w-full",attrs:{required:"",type:"text",value:t.selectedPath,label:t.$t("settings.folder_select_label"),placeholder:t.$t("settings.folder_select_placeholder")},on:{click:t.openDialog}},[t.statusMessage?e("sp-help-text",{attrs:{slot:"help-text"},slot:"help-text"},[t._v("\n                "+t._s(t.statusMessage)+"\n            ")]):t._e(),t._v(" "),t.statusMessage&&"invalid"===t.libraryType?e("sp-help-text",{attrs:{slot:"negative-help-text"},slot:"negative-help-text"},[t._v("\n                "+t._s(t.statusMessage)+"\n            ")]):t._e()],1),t._v(" "),e("sp-picker",{staticClass:"w-full",attrs:{disabled:"",value:t.locale},on:{change:function(e){t.locale=e.target.value}}},[e("span",{attrs:{slot:"label"},slot:"label"},[t._v(t._s(t.$t("settings.select_language")))]),t._v(" "),e("sp-menu-item",{attrs:{value:"ru",default:""}},[t._v("Русский")]),t._v(" "),e("sp-menu-item",{attrs:{value:"en",disabled:""}},[t._v("English")])],1)],1),t._v(" "),e("sp-button",{attrs:{disabled:!t.selectedPath||t.isBad},on:{click:t.confirmPath}},[t._v("\n        "+t._s(t.$t("buttons.save"))+"\n    ")])],1)},_e=[],we={name:"SettingsPage",data:function(){return{selectedPath:null}},computed:Object(nt["a"])(Object(nt["a"])(Object(nt["a"])({},Object(a["e"])("config",["libraryType","locale"])),Object(a["e"])("categories",["error"])),{},{title:function(){return this.$route.query.first?this.$t("settings.first_title"):this.$t("settings.title")},libraryTypeMessage:function(){switch(this.libraryType){case"our":return this.$t("settings.folder_our");case"new":return this.$t("settings.folder_new");case"invalid":return this.$t("settings.folder_invalid");case"error":return this.$t("settings.folder_error");default:return null}},isBad:function(){return"invalid"===this.libraryType||"error"===this.libraryType||!!this.error},statusMessage:function(){return this.error||this.libraryTypeMessage},locale:{get:function(){return this.$store.state.config.locale},set:function(t){this.$store.commit("config/setLocale",t)}}}),watch:{locale:function(t){this.setLocale(t),this.$i18n.locale=t}},methods:Object(nt["a"])(Object(nt["a"])(Object(nt["a"])({},Object(a["b"])("library",["initLibrary","detectLibraryType"])),Object(a["d"])("config",["setLibraryType","setLocale"])),{},{openDialog:function(){var t=this,e=window.cep.fs.showOpenDialog(!1,!0,this.$t("settings.folder_select"));0===e.err&&e.data&&e.data.length>0&&(this.selectedPath=e.data[0],this.$store.commit("categories/setError",null,{root:!0}),this.detectLibraryType(this.selectedPath).then((function(e){return t.setLibraryType(e)})))},confirmPath:function(){var t=this;return Object(o["a"])(Object(i["a"])().m((function e(){var n;return Object(i["a"])().w((function(e){while(1)switch(e.n){case 0:if(t.selectedPath&&!t.isBad){e.n=1;break}return e.a(2);case 1:return e.n=2,t.initLibrary(t.selectedPath);case 2:n=e.v,n&&t.$router.push({name:"Library"});case 3:return e.a(2)}}),e)})))()}})},je=we,Oe=Object(it["a"])(je,ye,_e,!1,null,null,null),Ce=Oe.exports;r["a"].use(ft["a"]);var ke=new ft["a"]({routes:[{path:"/",name:"Library",component:ve},{path:"/settings",name:"Settings",component:Ce}]});ke.beforeEach(function(){var t=Object(o["a"])(Object(i["a"])().m((function t(e,n,r){return Object(i["a"])().w((function(t){while(1)switch(t.n){case 0:if(Z.state.config.pathDirectory){t.n=1;break}return t.n=1,Z.dispatch("config/initConfig");case 1:if(Z.state.config.pathDirectory||"Settings"===e.name){t.n=2;break}return t.a(2,r({name:"Settings",query:{first:1}}));case 2:if(!Z.state.config.pathDirectory||"Settings"!==e.name||null!=n.name){t.n=3;break}return t.a(2,r({name:"Home"}));case 3:r();case 4:return t.a(2)}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}());var xe=ke,Se=n("a925"),$e=(n("d940"),n("7704")),Ee=n("edd4");n("f78f"),n("8e1d"),n("0487"),n("f0d1"),n("ec84"),n("e2607"),n("9baa");r["a"].config.productionTip=!1,r["a"].config.devtools=!1,r["a"].use(Se["a"]);var Le=new Se["a"]({locale:"ru",fallbackLocale:"en",messages:{ru:$e,en:Ee}});new r["a"]({store:Z,router:xe,i18n:Le,render:function(t){return t(pt)}}).$mount("#app")},7704:function(t){t.exports=JSON.parse('{"settings":{"title":"Настройки","first_title":"Предварительная настройка","select_language":"Выберите язык","folder_select":"Выберите папку","folder_select_label":"Корневая папка с проектами","folder_select_placeholder":"Укажите папку с проектами","folder_our":"Будет использована готовая библиотека EZImport","folder_existing":"Используется готовая библиотека с композициями (.aep)","folder_new":"Будет создана новая структура","folder_error":"Ошибка при определении папки","folder_invalid":"Данная папка не подходит для библиотеки EZImport"},"sidebar":{"title":"Категории"},"content":{"title":"Композиции"},"illustratedMessage":{"category_not_selected_title":"Категория не выбрана","category_not_selected_description":"Выберите категорию для просмотра композиций","category_empty_title":"Категория пуста","category_empty_description":"Добавьте композиции в выбранную категорию"},"categories":{"empty":"Пока что пусто","name":"Название категории","error_empty":"Имя не может быть пустым","error_exists":"Категория с таким именем уже существует","error_invalid":"Имя содержит недопустимые символы"},"compositions":{"name":"Название композиции","generate_formats":"Форматы к сохранению","error_empty":"Имя не может быть пустым","error_exists":"Композиция с таким именем уже существует","error_invalid":"Имя содержит недопустимые символы","error_no_compositions":"Вы не выбрали ни одной композиции"},"buttons":{"save":"Сохранить","cancel":"Отмена","saving":"Сохранение...","new_category":"Добавить категорию","new_composition":"Добавить композицию"},"errors":{"cannot_open_folder":"Не удалось открыть папку","error_open_folder":"Не удалось открыть папку"}}')},"9b0f":function(t,e){t.exports=require("fs")},a32b:function(t,e){t.exports=require("path")},a9b6:function(t,e,n){"use strict";n("d12b")},c02e:function(t,e,n){},d12b:function(t,e,n){},d940:function(t,e,n){},edd4:function(t){t.exports=JSON.parse('{"settings":{"title":"Settings","first_title":"Preliminary setup","select_language":"Select language","folder_select":"Select folder","folder_select_label":"Root folder with projects","folder_select_placeholder":"Enter folder with projects","folder_our":"EZImport library found (manifest.json)","folder_existing":"Ready library with compositions (.aep) is used","folder_new":"New structure will be created","folder_error":"Error while determining folder"},"buttons":{"save":"Save"}}')},f8da:function(t,e){t.exports=require("fs/promises")}});
//# sourceMappingURL=app.c824971f.js.map